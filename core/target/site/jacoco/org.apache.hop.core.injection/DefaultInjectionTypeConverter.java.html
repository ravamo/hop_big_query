<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DefaultInjectionTypeConverter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Hop Core</a> &gt; <a href="index.source.html" class="el_package">org.apache.hop.core.injection</a> &gt; <span class="el_source">DefaultInjectionTypeConverter.java</span></div><h1>DefaultInjectionTypeConverter.java</h1><pre class="source lang-java linenums">/*! ******************************************************************************
 *
 * Hop : The Hop Orchestration Platform
 *
 * http://www.project-hop.org
 *
 *******************************************************************************
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 ******************************************************************************/

package org.apache.hop.core.injection;

import org.apache.hop.core.exception.HopValueException;

/**
 * Default type converter for metadata injection.
 *
 * @author Alexander Buloichik
 */
<span class="fc" id="L32">public class DefaultInjectionTypeConverter extends InjectionTypeConverter {</span>
  @Override
  public String string2string( String v ) {
<span class="fc" id="L35">    return v;</span>
  }

  @Override
  public int string2intPrimitive( String v ) {
<span class="fc" id="L40">    return Integer.parseInt( v );</span>
  }

  @Override
  public Integer string2integer( String v ) {
<span class="fc bfc" id="L45" title="All 2 branches covered.">    return v == null ? null : string2intPrimitive( v );</span>
  }

  @Override
  public long string2longPrimitive( String v ) {
<span class="fc" id="L50">    return Long.parseLong( v );</span>
  }

  @Override
  public Long string2long( String v ) {
<span class="fc bfc" id="L55" title="All 2 branches covered.">    return v == null ? null : string2longPrimitive( v );</span>
  }

  @Override
  public boolean string2booleanPrimitive( String v ) {
<span class="fc bfc" id="L60" title="All 6 branches covered.">    return &quot;Y&quot;.equalsIgnoreCase( v ) || &quot;Yes&quot;.equalsIgnoreCase( v ) || &quot;true&quot;.equalsIgnoreCase( v );</span>
  }

  @Override
  public Boolean string2boolean( String v ) {
<span class="fc bfc" id="L65" title="All 2 branches covered.">    return v == null ? null : string2booleanPrimitive( v );</span>
  }

  @Override
  public Enum&lt;?&gt; string2enum( Class&lt;?&gt; enumClass, String v ) throws HopValueException {
<span class="pc bpc" id="L70" title="1 of 2 branches missed.">    if ( v == null ) {</span>
<span class="nc" id="L71">      return null;</span>
    }
<span class="pc bpc" id="L73" title="1 of 2 branches missed.">    for ( Object eo : enumClass.getEnumConstants() ) {</span>
<span class="fc" id="L74">      Enum&lt;?&gt; e = (Enum&lt;?&gt;) eo;</span>
<span class="fc bfc" id="L75" title="All 2 branches covered.">      if ( e.name().equals( v ) ) {</span>
<span class="fc" id="L76">        return e;</span>
      }
    }
<span class="nc" id="L79">    throw new HopValueException( &quot;Unknown value &quot; + v + &quot; for enum &quot; + enumClass );</span>
  }

  @Override
  public String boolean2string( Boolean v ) throws HopValueException {
<span class="fc bfc" id="L84" title="All 2 branches covered.">    if ( v == null ) {</span>
<span class="fc" id="L85">      return null;</span>
    }
<span class="fc bfc" id="L87" title="All 2 branches covered.">    return v ? &quot;Y&quot; : &quot;N&quot;;</span>
  }

  @Override
  public int boolean2intPrimitive( Boolean v ) throws HopValueException {
<span class="fc bfc" id="L92" title="All 2 branches covered.">    return v ? 1 : 0;</span>
  }

  @Override
  public Integer boolean2integer( Boolean v ) throws HopValueException {
<span class="fc bfc" id="L97" title="All 2 branches covered.">    return v == null ? null : boolean2intPrimitive( v );</span>
  }

  @Override
  public long boolean2longPrimitive( Boolean v ) throws HopValueException {
<span class="fc bfc" id="L102" title="All 2 branches covered.">    return v ? 1 : 0;</span>
  }

  @Override
  public Long boolean2long( Boolean v ) throws HopValueException {
<span class="fc bfc" id="L107" title="All 2 branches covered.">    return v == null ? null : boolean2longPrimitive( v );</span>
  }

  @Override
  public boolean boolean2booleanPrimitive( Boolean v ) throws HopValueException {
<span class="fc" id="L112">    return v.booleanValue();</span>
  }

  @Override
  public Boolean boolean2boolean( Boolean v ) throws HopValueException {
<span class="fc bfc" id="L117" title="All 2 branches covered.">    if ( v == null ) {</span>
<span class="fc" id="L118">      return null;</span>
    }
<span class="fc" id="L120">    return v;</span>
  }

  @Override
  public String integer2string( Long v ) throws HopValueException {
<span class="fc bfc" id="L125" title="All 2 branches covered.">    if ( v == null ) {</span>
<span class="fc" id="L126">      return null;</span>
    }
<span class="fc" id="L128">    return v.toString();</span>
  }

  @Override
  public int integer2intPrimitive( Long v ) throws HopValueException {
<span class="fc" id="L133">    return v.intValue();</span>
  }

  @Override
  public Integer integer2integer( Long v ) throws HopValueException {
<span class="fc bfc" id="L138" title="All 2 branches covered.">    return v == null ? null : integer2intPrimitive( v );</span>
  }

  @Override
  public long integer2longPrimitive( Long v ) throws HopValueException {
<span class="fc" id="L143">    return v.longValue();</span>
  }

  @Override
  public Long integer2long( Long v ) throws HopValueException {
<span class="fc bfc" id="L148" title="All 2 branches covered.">    return v == null ? null : integer2longPrimitive( v );</span>
  }

  @Override
  public boolean integer2booleanPrimitive( Long v ) throws HopValueException {
<span class="fc bfc" id="L153" title="All 2 branches covered.">    return v.longValue() != 0;</span>
  }

  @Override
  public Boolean integer2boolean( Long v ) throws HopValueException {
<span class="fc bfc" id="L158" title="All 2 branches covered.">    return v == null ? null : integer2booleanPrimitive( v );</span>
  }

  @Override
  public String number2string( Double v ) throws HopValueException {
<span class="nc bnc" id="L163" title="All 2 branches missed.">    if ( v == null ) {</span>
<span class="nc" id="L164">      return null;</span>
    }
<span class="nc" id="L166">    return v.toString();</span>
  }

  @Override
  public int number2intPrimitive( Double v ) throws HopValueException {
<span class="nc" id="L171">    return Math.round( v.floatValue() );</span>
  }

  @Override
  public Integer number2integer( Double v ) throws HopValueException {
<span class="nc bnc" id="L176" title="All 2 branches missed.">    return v == null ? null : number2intPrimitive( v );</span>
  }

  @Override
  public long number2longPrimitive( Double v ) throws HopValueException {
<span class="nc" id="L181">    return Math.round( v );</span>
  }

  @Override
  public Long number2long( Double v ) throws HopValueException {
<span class="nc bnc" id="L186" title="All 2 branches missed.">    return v == null ? null : number2longPrimitive( v );</span>
  }

  @Override
  public boolean number2booleanPrimitive( Double v ) throws HopValueException {
<span class="nc bnc" id="L191" title="All 2 branches missed.">    return number2intPrimitive( v ) != 0;</span>
  }

  @Override
  public Boolean number2boolean( Double v ) throws HopValueException {
<span class="nc bnc" id="L196" title="All 2 branches missed.">    return v == null ? null : number2booleanPrimitive( v );</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>